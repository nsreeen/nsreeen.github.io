<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>MyBlog</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">

<style>
body {
  /* margin-top: 30px; */
  /* color: #333333 !important; */
  font-family: sans-serif;
  font-size: 1.6em !important;
  line-height: 1.5;
}

a {
  color: #021245;
  text-decoration: underline;
 }
a:hover {
  color: #5384a2;
}
home-link {
  padding-bottom: 5px;
  margin-bottom: 10px;
}
h1 {
  padding-top: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid grey;
  background-color: #cadee0;
}

h2 {
  padding-top: 10px;
  padding-bottom: 5px;
}

h3 {
  padding-top: 10px;
  padding-bottom: 5px;
}

h5 {
  font-size: : 6px;
}

table {
  margin: 20px;
  border-spacing: 30px 0;
  border-collapse: collapse;
}

td,th {
  padding: 10px;
  border: 1px solid grey;
}

/* .page-list-item {
  list-style: none;
  text-decoration: none;
  margin-bottom: 5px;
} */
/* .page-list {
  padding: 0;
} */
/*hr {
  border: 1px solid grey;
}*/
/* header {
  border-bottom: 10px solid #5384a2;
} */
img {
  max-width: 50%;
}
.container {
  min-height: calc(100vh - 100px);
  height: 100%;
  max-width: 70%;
  /*position: relative;*/
}
.footer {
  padding-top: 30px;
  padding-bottom: 30px;
  margin-top: 20px;
  margin-bottom: 20px;
  border-top: 1px solid grey;
  font: 1.5em !important;;
  /* bottom:0; */
  height: 40px;
}

code {
  color: #021245;
  background-color: #dfe6e0;
}

</style>
</head>

<body>
  <section class="section">
    <div class="container">
      
<h1 class="title">
  Exploring git objects
</h1>
<p class="subtitle"><strong>2018-09-16</strong></p>
<p>Running the <code>git commit</code> command in a directory creates inside it a <code>.git</code> directory.  In other words, initializing a directory as a git repository means creating a <code>.git</code> folder in it.  All of the magic that happens in projects using git will be wrapped up and hidden away in that folder.</p>
<p>The <code>.git</code> directory has a bunch of interesting things inside it:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>branches        config       HEAD   index  logs     packed-refs
</span><span>  COMMIT_EDITMSG  description  hooks  info   objects  refs
</span></code></pre>
<p>This post is about the <code>.git/objects</code> directory, one of the most interesting parts. It stores the state of your work at specific points in the past (when you added or commited work) by writing changes to files in the <code>.git/objects</code> directory.  Each object file represents a snapshot of changes.</p>
<p>Here's an example of how it looks inside:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>├── objects
</span><span>│   ├── 05
</span><span>│   │   └── 63f77d884e4f79ce95117e2d686d7d6e282887
</span><span>│   ├── 83
</span><span>│   │   └── 3f294e32d36a5016344f6db69e727c48b51ad6
</span><span>│   ├── af
</span><span>│   │   └── 5626b4a114abcb82d63db7c8082c3c4756e51b
</span><span>│   ├── info
</span><span>│   └── pack
</span></code></pre>
<p>The files in there are hard to see as they are not in an easily readable format.  Luckily git has some built in commands for viewing the contents of these files!</p>
<h3 id="hash-paths">Hash paths</h3>
<p>The really cool thing about this is that the path for an object is generated by hashing the changes it contains.  The first two characters of the hash become the directory in the <code>.git/objects</code> directory, and the rest becomes the filename of the object.  This is really neat because it means that git creates an immutable record of changes.</p>
<p>I create a file called 'hello' containing the text &quot;Hello, world!&quot; and add it to git.  I can find the hash of this change by running:
<code>git hash-object hello</code>
=&gt; af5626b4a114abcb82d63db7c8082c3c4756e51b</p>
<p>The path for the object represting the change I made will be:
.git/objects/af/5626b4a114abcb82d63db7c8082c3c4756e51b</p>
<p>If I look at the contents of my <code>.git/objects</code>, I can see it:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>├── objects
</span><span>│   ├── af
</span><span>│   │   └── 5626b4a114abcb82d63db7c8082c3c4756e51b
</span><span>│   ├── info
</span><span>│   └── pack
</span></code></pre>
<h3 id="viewing-objects-contents">Viewing objects contents</h3>
<p>To see an objects contents we have to first find out its type.</p>
<p>An objects type is the type of change it represents: blob, tree, or commit.  the different types of objects are created in the following cases:
blob: the changes to each file in your working directory when you <code>add</code>
tree: each directory that has changes when you <code>commit</code>
commit: each <code>commit</code> itself gets its own object too</p>
<p>To find out the type of an objects file given its hash we can run:
<code>cat-file -t &lt;hash&gt;</code></p>
<p>Then we can use the type to see the contents of the object:
<code>cat-file &lt;type&gt; &lt;hash&gt;</code></p>
<p>For example:
<code>git cat-file -t 5626b4a114abcb82d63db7c8082c3c4756e51b</code>
=&gt; blob
<code>git cat-file blob 5626b4a114abcb82d63db7c8082c3c4756e51b</code>
=&gt; Hello, world!</p>


    </div>
  </section>

  <div class="footer">
    <div class="col-sm-8 col-sm-offset-2 footer-content">
      <script async defer src="https://www.recurse-scout.com/loader.js?t=d304529d7dd9725612669b298fef0b5c"></script>
    </div>
  </div>

</body>

</html>
